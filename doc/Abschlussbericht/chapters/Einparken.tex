 	\section{Paralleles Einparken}
	Bei dieser Aufgabe muss das Auto in eine möglichst kleine Parklücke hinter einem anderen bereits geparkten Fahrzeug rückwärts parallel einparken. Die theoretischen Grundlagen der in diesem Abschnitt gemachten Annahmen entstammen dem wissenschaftlichen Artiekl \cite{Weltformel:1}, in dem sich eingehend mit der Geometrie des Einparkens auseinandergesetzt wird. Die Herleitung der Formeln kann der Quelle entnommen werden.
	
  \subsection{Grundidee}
  Das Fahrzeug fährt zu einer zuvor berechneten Startposition. Dort angekommen wird nach rechts eingelenkt und rückwärts gefahren. Wird nun ein gewisser Gierwinkel erreicht, wird nach links gelenkt bis das Fahrzeug in der Parklücke steht. 
  
  \subsection{Verwendete Variablen}
  Folgende Variablen werden in den folgenden Abschnitten analog zu \cite{Weltformel:1} verwendet:
  \begin{itemize}
  \item R: minimaler Kurvenradius
  \item W: Breite des Autos
  \item b: Distanz zwischen Hinterrad und vordere Ecke des Autos
  \item $ \theta: $ Gierwinkel
  \end{itemize}
  
  \subsection{Ackermann-Lenkung}
  Als Erstes ist es wichtig zu verstehen, wie sich das Auto bei Lenkbewegungen verhält. Dazu greift man auf das Modell der Ackermann-Lenkung zurück.
  Es sagt aus, dass das Auto sich beim Kurvenfahren auf einer Kreisbahn um ein Rotationszentrum herum bewegt.   
  
  \subsection{Minimale Parklücke}
  In der Aufgabenstellung ist gefordert, dass die Parklücke möglichst klein sein soll. Was ist also die minimal benötigte Parklückengröße bei gegebenem Kurvenradius des Fahrzeugs? Besagte Größe lässt sich mit einem Gedankenexperiment recht leicht ermitteln. Hierfür wird angenommen, dass sich das Auto bereits in der Parklücke befindet. Die optimale Lücke ist nun die kleinstmögliche Lücke, aus welcher das Fahrzeug durch volles Einschlagen der Räder nach links noch ausparken kann, ohne das vor ihm geparkte Auto zu berühren.\\ Mit Hilfe der Formel $h = \sqrt{ b^{2} - W^{2} + 2RW}$ aus \cite{Weltformel:1} lässt sich die Größe der Lücke wie folgt ermitteln: $\text{Länge des Autos} + h - b$ \\
  Setzt man für den Kurvenradius des Autos $1m$ an, ergibt sich daraus eine Parklücke von ca. 70cm. Wählt man den in Abschnitt 4.7 definierten Sicherheitsabstand zu 10cm, wächst die minimale Parklücke auf ca. 80cm an. Aufgrund von diversen Ungenauigkeiten des Systems sollten reale Parklücken mindestens 90cm groß sein, um Parkrempler jegliche Art mit Sicherheit ausschließen zu können.
  
  \pagebreak
  \subsection{Parklückenerkennung}
  Unsere Annahme ist, dass sich im Sichtbereich der Kinect-Kamera ein geparktes Auto befindet, an dem sich beim Parken orientiert werden kann. Die hintere linke Ecke des geparkten Autos wird erkannt, indem die Punkte des Laserscans mittels Linienerkennung nach 2 Linien abgesucht werden, die einen gemeinsamen Punkte besitzen und somit eine Ecke darstellen.
  
  \subsubsection{Linienerkennung mittels RANSAC}
  Mit Hilfe eines \textbf{Ra}ndom \textbf{Sa}mple \textbf{C}onsensus-Algorithmus (RANSAC) lassen sich Linien im Laserscan erkennen. Die einzelnen Schritte sind im Folgenden erklärt:
  \begin{enumerate}
  \item Wähle zwei Punkte zufällig aus.
  \item Erzeuge mit Hilfe dieser beiden Punkte eine Linie.
  \item Iteriere über alle Punkte und zähle, wie viele Punkte sich in der unmittelbaren Umgebung der Linie befinden.
  \item Unterstützen genug Punkte das Modell auf diese Weise, wird die Lösung gespeichert. Die Menge der unterstützenden Punkte wird als \textit{Consensus Set} bezeichnet.
  \item Wiederhole die ersten vier Schritte. Wurden genügend Iterationen durchgeführt, wird das Modell mit dem größten Consensus Set ausgewählt.
  \end{enumerate}
  Die Qualität und Zuverlässigkeit der Lösung hängen dabei stark ab von der Anzahl der durchgeführten Iterationen und der größtmöglichen Entfernung eines Punktes von der Linie, für welche er noch im Consensus Set liegt, ab.
  \subsubsection{Linienerkennung mittels RLF}
  Um in einer Menge von Punkten Linien zu erkennen, geht man beim \textbf{R}ecursive \textbf{L}ine \textbf{F}itting (RLF) wie folgt vor: Man verbindet die beiden äußeren Punkte im Laserscan mit einer Linie. Nun wird der am weitesten von der Linie entfernte Punkt bestimmt. Ist diese Abweichung kleiner als ein gewisser Schwellwert, wird die Linie als solche akzeptiert. Ansonsten wird die Punktmenge an dieser Stelle aufgetrennt und der Algorithmus rekursiv auf die beiden Teilmengen angewendet. Zusätzlich bricht der Algorithmus ab, wenn die Punktmenge nicht eine gewisse Mindestzahl an Elementen aufweist. \\\\
  Aufgrund des deterministischen Verhaltens und des deutlich geringeren Rechenaufwandes wird RLF zur Linienerkennung eingesetzt und nicht der oben beschriebene RANSAC.
  
  \pagebreak
  \subsection{Berechnung des maximalen Gierwinkels}
  Die folgenden Formeln stammen aus \cite{Weltformel:1}. Durch sie erhält man den Gierwinkel $\theta$.
  \[R_e=\sqrt{R^2+b^2}\]
  \[\alpha = \arccos(1-\frac{b^2}{4R^2})\]
  \[\beta = \arcsin(\frac{R}{R_e}*\sin(\alpha))\]
  \[\theta = \arccos(\frac{R-W}{R_e})-\beta\]	
  
  \subsection{Sicherheitsabstand} 
  Die bisherigen Annahmen wurden unter idealen Bedingungen gemacht, sodass das Auto etwa mit Abstand 0 an anderen Objekten vorbei fährt. Da dies in echt nicht praktikabel ist, berechnen wir alle Werte mit einem zusätzlichen Sicherheitsabstand. Dies wird erreicht, indem wir sowohl unser Auto breiter annehmen als es eigentlich ist und noch die Startposition für die Einlenkbewegung etwas verschieben.  